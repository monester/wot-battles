{% extends 'base.html' %}
{% load tz %}

{% block content %}
    <h3>Battle by time</h3>

    <table class="table">
        <tr>
            <th>Province name</th>
            <th>Attack type</th>
            {% for time in battle_matrix2.times %}
            <th>{{ time|timezone:"Europe/Moscow"|date:"H:i" }}</th>
            {% endfor %}
        </tr>

        {% for province, times in battle_matrix2.table %}
        <tr style="background-color: #{{ province.bgcolor }}">
            <td><a href="{{ province.url }}" target="_blank">
                {{ province.server }} {{ province.province_name }} ({{ province.arena_name }},
                {{ province.prime_datetime|timezone:"Europe/Moscow"|date:"H:i" }})
            </a></td>
            <td>{{ province.attack_type }}</td>
            {% for battle in times %}
            <td class="{{ battle.class }}">
                <a href="{{ battle.url }}" target="_blank">{{ battle.text }}</a>
            </td>
            {% endfor %}
        </tr>
        {% endfor %}
    </table>


    <table class="table">
        <tr>
            {% for time, items in battle_matrix.items %}{% if items %}
            <th>{{ time|timezone:"Europe/Moscow"|date:"H:i" }}</th>
            {% endif %}{% endfor %}
        </tr>
        <tr>
            {% for battles in battle_matrix.values %}{% if battles %}
                <td>
                    <ul>{% for battle in battles %}
                    <li><a href="{{ battle.url }}">{{ battle.server }} {{ battle.province_name }} {{ battle.arena_name }}</a></li>
                {% endfor %}
                    </ul>
                </td>
            {% endif %}{% endfor %}
        </tr>
    </table>
{% endblock %}
